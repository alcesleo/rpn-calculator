{"version":3,"sources":["index.js"],"names":["DECIMAL","MINUS","EMPTY_BOTTOM_ROW","EMPTY_STACK","DISPLAY_PADDING","Array","DISPLAY_ROWS","fill","Calculator","props","handleDecimal","setBottomRow","display","indexOf","handleArithmetic","func","stack","getCurrentStack","length","slice","rhs","lhs","result","Number","parseFloat","toString","setStack","handleDivision","handleMultiplication","handleSubtraction","handleAddition","handleSign","row","handleClear","handleDrop","handleDelete","handleEnter","handleUndo","state","historyPosition","setState","handleRedo","history","handleRoll","handleSwap","handleKeyDown","e","console","log","key","getDigitHandler","document","addEventListener","this","className","getDisplayRows","map","i","onClick","reverse","dropRedoHistory","digit","React","Component","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.1213b988.chunk.js","sourcesContent":["import React from 'react';\r\nimport ReactDOM from 'react-dom'\r\nimport './index.css'\r\n\r\nconst DECIMAL = '.';\r\nconst MINUS = '-';\r\nconst DISPLAY_ROWS = 10;\r\nconst EMPTY_BOTTOM_ROW = '0';\r\nconst EMPTY_ROW = '\\u00A0'; // &nbsp;\r\nconst EMPTY_STACK = [EMPTY_BOTTOM_ROW];\r\nconst DISPLAY_PADDING = Array(DISPLAY_ROWS - 1).fill(EMPTY_ROW);\r\n\r\nclass Calculator extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      history: [EMPTY_STACK],\r\n      historyPosition: 0,\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    document.addEventListener('keydown', this.handleKeyDown);\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"calculator\">\r\n        <div className=\"display\">{this.getDisplayRows().map((row, i) =>\r\n          <div key={i} className=\"display_row\">{row}</div>\r\n        )}\r\n        </div>\r\n\r\n        <div className=\"btn operator\" onClick={this.handleRoll}>Roll</div>\r\n        <div className=\"btn operator\" onClick={this.handleUndo}>Undo</div>\r\n        <div className=\"btn operator\" onClick={this.handleRedo}>Redo</div>\r\n        <div className=\"btn operator\" onClick={this.handleSign}>+/-</div>\r\n        <div className=\"btn operator\" onClick={this.handleDivision}>/</div>\r\n\r\n        <div className=\"btn operator\" onClick={this.handleSwap}>Swap</div>\r\n        <div className=\"btn\" onClick={this.getDigitHandler('7')}>7</div>\r\n        <div className=\"btn\" onClick={this.getDigitHandler('8')}>8</div>\r\n        <div className=\"btn\" onClick={this.getDigitHandler('9')}>9</div>\r\n        <div className=\"btn operator\" onClick={this.handleMultiplication}>*</div>\r\n\r\n        <div className=\"btn operator\" onClick={this.handleClear}>Clear</div>\r\n        <div className=\"btn\" onClick={this.getDigitHandler('4')}>4</div>\r\n        <div className=\"btn\" onClick={this.getDigitHandler('5')}>5</div>\r\n        <div className=\"btn\" onClick={this.getDigitHandler('6')}>6</div>\r\n        <div className=\"btn operator\" onClick={this.handleSubtraction}>-</div>\r\n\r\n        <div className=\"btn operator\" onClick={this.handleDrop}>Drop</div>\r\n        <div className=\"btn\" onClick={this.getDigitHandler('1')}>1</div>\r\n        <div className=\"btn\" onClick={this.getDigitHandler('2')}>2</div>\r\n        <div className=\"btn\" onClick={this.getDigitHandler('3')}>3</div>\r\n        <div className=\"btn operator\" onClick={this.handleAddition}>+</div>\r\n\r\n        <div className=\"btn operator\" onClick={this.handleDelete}>Del</div>\r\n        <div className=\"btn operator\" onClick={this.handleDecimal}>{DECIMAL}</div>\r\n        <div className=\"btn\" onClick={this.getDigitHandler('0')}>0</div>\r\n        <div className=\"btn operator enter\" onClick={this.handleEnter}>Enter</div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  getDisplayRows() {\r\n    return [...this.getCurrentStack(), ...DISPLAY_PADDING].slice(0, DISPLAY_ROWS).reverse();\r\n  }\r\n\r\n  getCurrentStack() {\r\n    return this.state.history[this.state.historyPosition];\r\n  }\r\n\r\n  setStack(func) {\r\n    const stack = func(this.getCurrentStack());\r\n    const dropRedoHistory = this.state.history.slice(0, this.state.historyPosition + 1)\r\n    const history = [...dropRedoHistory, stack];\r\n\r\n    this.setState(state => ({\r\n      history: history,\r\n      historyPosition: state.historyPosition + 1,\r\n    }));\r\n  }\r\n\r\n  setBottomRow(func) {\r\n    this.setStack(stack => [func(stack[0]), ...stack.slice(1)]);\r\n  }\r\n\r\n  getDigitHandler(digit) {\r\n    return () => {\r\n      this.setBottomRow((display) => display !== EMPTY_BOTTOM_ROW ? `${display}${digit}` : digit);\r\n    }\r\n  }\r\n\r\n  handleDecimal = () => {\r\n    this.setBottomRow((display) => display.indexOf(DECIMAL) === -1 ? `${display}${DECIMAL}` : display);\r\n  }\r\n\r\n  handleArithmetic = func => {\r\n    const stack = this.getCurrentStack();\r\n\r\n    if (stack.length < 2) return;\r\n\r\n    const [rhs, lhs] = stack.slice(0, 2);\r\n    const result = func(Number.parseFloat(lhs), Number.parseFloat(rhs)).toString();\r\n\r\n    this.setStack(stack => [result, ...stack.slice(2)])\r\n  }\r\n  handleDivision       = () => this.handleArithmetic((lhs, rhs) => lhs / rhs);\r\n  handleMultiplication = () => this.handleArithmetic((lhs, rhs) => lhs * rhs);\r\n  handleSubtraction    = () => this.handleArithmetic((lhs, rhs) => lhs - rhs);\r\n  handleAddition       = () => this.handleArithmetic((lhs, rhs) => lhs + rhs);\r\n\r\n  handleSign = () => {\r\n    this.setBottomRow(row => row.indexOf(MINUS) === -1 ? `${MINUS}${row}` : row.slice(1));\r\n  }\r\n\r\n  handleClear = () => {\r\n    if (this.getCurrentStack() === EMPTY_STACK) return;\r\n\r\n    this.setStack(() => EMPTY_STACK);\r\n  }\r\n\r\n  handleDrop = () => {\r\n    this.setStack(stack => stack.length === 1 ? EMPTY_STACK : stack.slice(1));\r\n  }\r\n\r\n  handleDelete = () => {\r\n    this.setBottomRow(row => row.length > 1 ? row.slice(0, -1) : EMPTY_BOTTOM_ROW);\r\n  }\r\n\r\n  handleEnter = () => {\r\n    this.setStack(stack => [EMPTY_BOTTOM_ROW, ...stack]);\r\n  }\r\n\r\n  handleUndo = () => {\r\n    if (this.state.historyPosition <= 0) return;\r\n\r\n    this.setState(state => ({\r\n      historyPosition: state.historyPosition - 1\r\n    }));\r\n  }\r\n\r\n  handleRedo = () => {\r\n    if (this.state.historyPosition >= this.state.history.length - 1) return;\r\n\r\n    this.setState(state => ({\r\n      historyPosition: state.historyPosition + 1,\r\n    }));\r\n  }\r\n\r\n  handleRoll = () => {\r\n    this.setStack(stack => [...stack.slice(1), stack[0]]);\r\n  }\r\n\r\n  handleSwap = () => {\r\n    if (this.getCurrentStack().length <= 1) return;\r\n\r\n    this.setStack(stack => [stack[1], stack[0], ...stack.slice(2)]);\r\n  }\r\n\r\n  handleKeyDown = e => {\r\n    console.log(e);\r\n    switch (e.key) {\r\n      case '0':\r\n      case '1':\r\n      case '2':\r\n      case '3':\r\n      case '4':\r\n      case '5':\r\n      case '6':\r\n      case '7':\r\n      case '8':\r\n      case '9':\r\n        this.getDigitHandler(e.key)();\r\n        break;\r\n      case '.':\r\n        this.handleDecimal();\r\n        break;\r\n      case '+':\r\n        this.handleAddition();\r\n        break;\r\n      case '-':\r\n        this.handleSubtraction();\r\n        break;\r\n      case '*':\r\n        this.handleMultiplication();\r\n        break;\r\n      case '/':\r\n        this.handleDivision();\r\n        break;\r\n      case 'Enter':\r\n        this.handleEnter();\r\n        break;\r\n      case 'Backspace':\r\n        this.handleDelete();\r\n        break;\r\n      case 'r':\r\n        this.handleRoll();\r\n        break;\r\n      case 's':\r\n        this.handleSwap();\r\n        break;\r\n      case 'c':\r\n        this.handleClear();\r\n        break;\r\n      case 'd':\r\n        this.handleDrop();\r\n        break;\r\n      case 'm':\r\n        this.handleSign();\r\n        break;\r\n      case 'z':\r\n        this.handleUndo();\r\n        break;\r\n      case 'y':\r\n        this.handleRedo();\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n  }\r\n}\r\n\r\nReactDOM.render(\r\n  <Calculator />,\r\n  document.getElementById('root')\r\n);\r\n"],"sourceRoot":""}