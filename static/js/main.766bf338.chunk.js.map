{"version":3,"sources":["index.js"],"names":["DECIMAL","MINUS","DISPLAY_ROWS","EMPTY_BOTTOM_ROW","EMPTY_STACK","DISPLAY_PADDING","Array","fill","Calculator","props","digitHandler","digit","setBottomRow","display","handleDecimal","indexOf","handleDivision","handleArithmetic","lhs","rhs","handleMultiplication","handleSubtraction","handleAddition","func","stack","getStack","length","console","log","slice","result","Number","parseFloat","toString","setStack","handleSign","row","handleClear","handleDrop","handleDelete","handleEnter","handleUndo","state","historyPosition","setState","handleRedo","history","handleRoll","handleSwap","getDisplayRows","reverse","newStack","newHistory","map","item","index","className","this","i","key","onClick","React","Component","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.766bf338.chunk.js","sourcesContent":["import React from 'react';\nimport ReactDOM from 'react-dom'\nimport './index.css'\n\nconst DECIMAL = '.';\nconst MINUS = '-';\nconst DISPLAY_ROWS = 10;\nconst EMPTY_BOTTOM_ROW = '0';\nconst EMPTY_ROW = '\\u00A0'; // &nbsp;\nconst EMPTY_STACK = [EMPTY_BOTTOM_ROW];\nconst DISPLAY_PADDING = Array(DISPLAY_ROWS - 1).fill(EMPTY_ROW);\n\nclass Calculator extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      history: [EMPTY_STACK],\n      historyPosition: 0,\n    };\n  }\n\n  render() {\n    return (\n      <div className=\"calculator\">\n        <div className=\"display\">{this.getDisplayRows().map((row, i) =>\n          <div key={i} className=\"display_row\">{row}</div>\n        )}\n        </div>\n\n        <div className=\"btn operator\" onClick={this.handleRoll}>Roll</div>\n        <div className=\"btn operator\" onClick={this.handleUndo}>Undo</div>\n        <div className=\"btn operator\" onClick={this.handleRedo}>Redo</div>\n        <div className=\"btn operator\" onClick={this.handleSign}>+/-</div>\n        <div className=\"btn operator\" onClick={this.handleDivision}>/</div>\n\n        <div className=\"btn operator\" onClick={this.handleSwap}>Swap</div>\n        <div className=\"btn\" onClick={this.digitHandler('7')}>7</div>\n        <div className=\"btn\" onClick={this.digitHandler('8')}>8</div>\n        <div className=\"btn\" onClick={this.digitHandler('9')}>9</div>\n        <div className=\"btn operator\" onClick={this.handleMultiplication}>*</div>\n\n        <div className=\"btn operator\" onClick={this.handleClear}>Clear</div>\n        <div className=\"btn\" onClick={this.digitHandler('4')}>4</div>\n        <div className=\"btn\" onClick={this.digitHandler('5')}>5</div>\n        <div className=\"btn\" onClick={this.digitHandler('6')}>6</div>\n        <div className=\"btn operator\" onClick={this.handleSubtraction}>-</div>\n\n        <div className=\"btn operator\" onClick={this.handleDrop}>Drop</div>\n        <div className=\"btn\" onClick={this.digitHandler('1')}>1</div>\n        <div className=\"btn\" onClick={this.digitHandler('2')}>2</div>\n        <div className=\"btn\" onClick={this.digitHandler('3')}>3</div>\n        <div className=\"btn operator\" onClick={this.handleAddition}>+</div>\n\n        <div className=\"btn operator\" onClick={this.handleDelete}>Del</div>\n        <div className=\"btn operator\" onClick={this.handleDecimal}>{DECIMAL}</div>\n        <div className=\"btn\" onClick={this.digitHandler('0')}>0</div>\n        <div className=\"btn operator enter\" onClick={this.handleEnter}>Enter</div>\n      </div>\n    )\n  }\n\n  digitHandler = digit => {\n    return () => {\n      this.setBottomRow((display) => display !== EMPTY_BOTTOM_ROW ? `${display}${digit}` : digit);\n    }\n  }\n\n  handleDecimal = () => {\n    this.setBottomRow((display) => display.indexOf(DECIMAL) === -1 ? `${display}${DECIMAL}` : display);\n  }\n\n  handleDivision       = () => this.handleArithmetic((lhs, rhs) => lhs / rhs);\n  handleMultiplication = () => this.handleArithmetic((lhs, rhs) => lhs * rhs);\n  handleSubtraction    = () => this.handleArithmetic((lhs, rhs) => lhs - rhs);\n  handleAddition       = () => this.handleArithmetic((lhs, rhs) => lhs + rhs);\n\n  handleArithmetic = (func) => {\n    const stack = this.getStack()\n    if (stack.length < 2) {\n      console.log('You need at least 2 numbers on the stack to perform arithmetic.');\n      return;\n    }\n    const [rhs, lhs] = stack.slice(0, 2);\n    const result = func(Number.parseFloat(lhs), Number.parseFloat(rhs)).toString();\n\n    this.setStack(stack => [result, ...stack.slice(2)])\n  }\n\n  handleSign = () => {\n    this.setBottomRow(row => row.indexOf(MINUS) === -1 ? `${MINUS}${row}` : row.slice(1));\n  }\n\n  handleClear = () => {\n    if (this.getStack() === EMPTY_STACK) return;\n    this.setStack(() => EMPTY_STACK);\n  }\n\n  handleDrop = () => {\n    this.setStack(stack => stack.length === 1 ? EMPTY_STACK : stack.slice(1));\n  }\n\n  handleDelete = () => {\n    this.setBottomRow(row => row.length > 1 ? row.slice(0, -1) : EMPTY_BOTTOM_ROW);\n  }\n\n  handleEnter = () => {\n    this.setStack(stack => [EMPTY_BOTTOM_ROW, ...stack]);\n  }\n\n  handleUndo = () => {\n    if (this.state.historyPosition <= 0) return;\n\n    this.setState(state => ({\n      historyPosition: state.historyPosition - 1\n    }));\n  }\n\n  handleRedo = () => {\n    if (this.state.historyPosition >= this.state.history.length - 1) return;\n\n    this.setState(state => ({\n      historyPosition: state.historyPosition + 1,\n    }));\n  }\n\n  handleRoll = () => {\n    this.setStack(stack => [...stack.slice(1), stack[0]]);\n  }\n\n  handleSwap = () => {\n    if (this.getStack().length <= 1) return;\n    this.setStack(stack => [stack[1], stack[0], ...stack.slice(2)]);\n  }\n\n  getDisplayRows = () => [...this.getStack(), ...DISPLAY_PADDING].slice(0, DISPLAY_ROWS).reverse();\n\n  getStack = () => this.state.history[this.state.historyPosition];\n\n  setStack = func => {\n    const newStack = func(this.getStack());\n    const newHistory = [...this.state.history.slice(0, this.state.historyPosition + 1), newStack];\n\n    this.setState(state => ({\n      history: newHistory,\n      historyPosition: state.historyPosition + 1,\n    }));\n  }\n\n  setBottomRow = func => {\n    this.setStack(stack =>\n      stack.map((item, index) => index === 0 ? func(item) : item)\n    );\n  }\n}\n\nReactDOM.render(\n  <Calculator />,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}